"use strict";

var catalog = function ($) {

    function _getUrl() {
        var query = location.search.substr(1);
        var result = {};

        query.split("&").forEach(function (part) {
            var item = part.split("=");
            result[item[0]] = decodeURIComponent(item[1]);
        });

        return result;
    }

    function _setUrl(name, parameter) {
        var _url = _getUrl();

        _url[name] = parameter;

        return _url;
    }

    function _joinUrl(get) {
        var url = [];

        Object.keys(get).map(function (id) {
            if (get[id] !== 'undefined' && get[id] !== '') {
                url.push([id, get[id]].join('='));
            }
        });

        return url.join('&');
    }

    function _redirectUrl(get) {
        if (Object.keys(get).length) {
            var url = '';

            Object.keys(get).map(function (id) {
                if (id !== 'page' && get[id] !== 'undefined' && get[id] !== '') {
                    if (url !== '') {
                        url += '&';
                    }

                    url += [id, get[id]].join('=');
                }
            });

            location.search = url;
        }
    }

    return {
        tab: function tab(element, id) {
            $('.tabs__list__link').removeClass('tabs__list__link_current');
            $('.catalog-tabs__item').removeClass('current');

            $(element).addClass('tabs__list__link_current');
            $("#tab-" + id).addClass('current');
        },
        sort: function sort(name) {
            var _get = _getUrl();

            if (typeof _get.sort !== 'undefined') {
                var type = _get.sort.split('-')[1];
                type = type === 'asc' ? 'desc' : 'asc';
                location.search = _joinUrl(_setUrl('sort', name + '-' + type));
            } else {
                location.search = _joinUrl(_setUrl('sort', name + '-asc'));
            }
        },
        search: function search(name, value, bind, e) {
            if (bind) {
                if (e.keyCode == 13) {
                    _redirectUrl(_setUrl(name, value));
                }
            } else {
                _redirectUrl(_setUrl(name, value));
            }
        },
        reload: function reload() {
            var _get = _getUrl();

            if (typeof _get.page !== 'undefined') {
                var prev = _get.page - 1 >= 0 ? _get.page - 1 : '';

                if (prev) {
                    location.search = 'page=' + prev;
                } else {
                    location.reload();
                }
            } else {
                location.reload();
            }
        },
        setLimit: function setLimit(section, element) {
            var limit = parseInt(element.value);

            if (limit > 0) {
                var name = ['module', 'pages', section].join('_');

                $.removeCookie(name);
                $.cookie(name, limit, { expires: 30, path: '/' });

                setTimeout(function () {
                    location.reload();
                }, 50);
            }
        },


        // function setModuleSort(obj, module_id, field)
        // {
        //     cn = "moduleSort";
        //     value = $(obj).val();
        //     var cv = getCookie(cn);
        //     if (cv)
        //     {
        //         var arr = new Array();
        //         tmp = unserialize(cv);

        //         if (tmp[module_id] == undefined){
        //             var arr = new Array();
        //             arr[field] = value;
        //             tmp[module_id] = arr;
        //         }
        //         else{
        //             if (tmp[module_id][field] == undefined){
        //                 tmp[module_id][field] = value;
        //             }
        //             else{
        //                 tmp[module_id][field] = value;
        //             }
        //         }

        //         setCookie(cn,serialize(tmp));
        //     }
        //     else
        //     {
        //         var arr = new Array();
        //         var tmp = new Array();
        //         tmp[field] = value;
        //         arr[module_id] = tmp;
        //         setCookie(cn,serialize(arr));
        //     }
        //     location.href = location.href;
        // }

        update: function update(e, name, id) {
            var value = Number(e.target.checked);

            $.ajax({
                url: ['/', ADMIN_DIR, '/shopping/update'].join(''),
                type: "post",
                data: {
                    id: id,
                    name: name,
                    value: value
                },
                dataType: 'JSON',
                success: function success(response) {
                    console.log('update');
                }
            });
        },
        checkAll: function checkAll(element) {
            var checked = $(element).prop('checked');
            $('.check-all-spy').prop('checked', checked);

            if (checked) {
                $('#remove-button').addClass('enable');
            } else {
                $('#remove-button').removeClass('enable');
            }
        },
        checkItem: function checkItem(element) {
            if ($('.check-all-spy:checked').length) {
                $('#remove-button').addClass('enable');
            } else {
                $('#remove-button').removeClass('enable');
            }
        },
        deleteProduct: function deleteProduct(e, id) {
            e.preventDefault();

            if (cp.dialog('Вы действительно хотите удалить товар?')) {
                this.deleteItem(id, true);
            }
        },
        deleteItem: function deleteItem(id, notify) {
            $.ajax({
                url: ['/', ADMIN_DIR, '/shopping/delete'].join(''),
                type: "post",
                data: { id: id },
                dataType: 'JSON',
                success: function success() {
                    $('#module-table').find('.module-table__row[data-id="' + id + '"]').remove();

                    if (notify) {
                        cp.notify('Товар удален', 'info');
                    }
                }
            });
        },
        deleteAll: function deleteAll(e) {
            e.preventDefault();

            var count = $('.check-all-spy:checked').length;
            var limit = $('.check-all-spy').length;

            if (count) {
                var _this = this;

                if (cp.dialog(['Вы действительно хотите удалить ', declOfNum(count, ['товар', 'товара', 'товаров']), '?'].join(''))) {
                    $('.check-all-spy:checked').each(function (k, element) {
                        _this.deleteItem(parseInt($(element).val()), false);

                        if (k + 1 == count) {
                            cp.notify(['Удалено ', declOfNum(count, ['товар', 'товара', 'товаров'])].join(''), 'info');

                            setTimeout(function () {
                                if (count == limit) {
                                    _this.reload();
                                } else {
                                    location.reload();
                                }
                            }, 150);
                        }
                    });
                }
            }
        }
    };
}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGFsb2cuanMiXSwibmFtZXMiOlsiY2F0YWxvZyIsIiQiLCJfZ2V0VXJsIiwicXVlcnkiLCJsb2NhdGlvbiIsInNlYXJjaCIsInN1YnN0ciIsInJlc3VsdCIsInNwbGl0IiwiZm9yRWFjaCIsInBhcnQiLCJpdGVtIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiX3NldFVybCIsIm5hbWUiLCJwYXJhbWV0ZXIiLCJfdXJsIiwiX2pvaW5VcmwiLCJnZXQiLCJ1cmwiLCJPYmplY3QiLCJrZXlzIiwibWFwIiwiaWQiLCJwdXNoIiwiam9pbiIsIl9yZWRpcmVjdFVybCIsImxlbmd0aCIsInRhYiIsImVsZW1lbnQiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwic29ydCIsIl9nZXQiLCJ0eXBlIiwidmFsdWUiLCJiaW5kIiwiZSIsImtleUNvZGUiLCJyZWxvYWQiLCJwYWdlIiwicHJldiIsInNldExpbWl0Iiwic2VjdGlvbiIsImxpbWl0IiwicGFyc2VJbnQiLCJyZW1vdmVDb29raWUiLCJjb29raWUiLCJleHBpcmVzIiwicGF0aCIsInNldFRpbWVvdXQiLCJ1cGRhdGUiLCJOdW1iZXIiLCJ0YXJnZXQiLCJjaGVja2VkIiwiYWpheCIsIkFETUlOX0RJUiIsImRhdGEiLCJkYXRhVHlwZSIsInN1Y2Nlc3MiLCJyZXNwb25zZSIsImNvbnNvbGUiLCJsb2ciLCJjaGVja0FsbCIsInByb3AiLCJjaGVja0l0ZW0iLCJkZWxldGVQcm9kdWN0IiwicHJldmVudERlZmF1bHQiLCJjcCIsImRpYWxvZyIsImRlbGV0ZUl0ZW0iLCJub3RpZnkiLCJmaW5kIiwicmVtb3ZlIiwiZGVsZXRlQWxsIiwiY291bnQiLCJfdGhpcyIsImRlY2xPZk51bSIsImVhY2giLCJrIiwidmFsIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiOztBQUFBLElBQU1BLFVBQVcsVUFBU0MsQ0FBVCxFQUFZOztBQUV6QixhQUFTQyxPQUFULEdBQW1CO0FBQ2YsWUFBTUMsUUFBUUMsU0FBU0MsTUFBVCxDQUFnQkMs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KCQpIHtcbiAgICBcbiAgICBmdW5jdGlvbiBfZ2V0VXJsKCkge1xuICAgICAgICBjb25zdCBxdWVyeSA9IGxvY2F0aW9uLnNlYXJjaC5zdWJzdHIoMSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuXG4gICAgICAgIHF1ZXJ5LnNwbGl0KFwiJlwiKS5mb3JFYWNoKGZ1bmN0aW9uKHBhcnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBwYXJ0LnNwbGl0KFwiPVwiKTtcbiAgICAgICAgICAgIHJlc3VsdFtpdGVtWzBdXSA9IGRlY29kZVVSSUNvbXBvbmVudChpdGVtWzFdKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfc2V0VXJsKG5hbWUsIHBhcmFtZXRlcikge1xuICAgICAgICBjb25zdCBfdXJsID0gX2dldFVybCgpO1xuXG4gICAgICAgIF91cmxbbmFtZV0gPSBwYXJhbWV0ZXI7XG5cbiAgICAgICAgcmV0dXJuIF91cmw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gX2pvaW5VcmwoZ2V0KSB7XG4gICAgICAgIGNvbnN0IHVybCA9IFtdO1xuXG4gICAgICAgIE9iamVjdC5rZXlzKGdldCkubWFwKGlkID0+IHtcbiAgICAgICAgICAgIGlmIChnZXRbaWRdICE9PSAndW5kZWZpbmVkJyAmJiBnZXRbaWRdICE9PSAnJykge1xuICAgICAgICAgICAgICAgIHVybC5wdXNoKFtpZCwgZ2V0W2lkXV0uam9pbignPScpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHVybC5qb2luKCcmJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gX3JlZGlyZWN0VXJsKGdldCkge1xuICAgICAgICBpZiAoT2JqZWN0LmtleXMoZ2V0KS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxldCB1cmwgPSAnJztcblxuICAgICAgICAgICAgT2JqZWN0LmtleXMoZ2V0KS5tYXAoaWQgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpZCAhPT0gJ3BhZ2UnICYmIGdldFtpZF0gIT09ICd1bmRlZmluZWQnICYmIGdldFtpZF0gIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1cmwgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmwgKz0gJyYnXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB1cmwgKz0gW2lkLCBnZXRbaWRdXS5qb2luKCc9JylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBsb2NhdGlvbi5zZWFyY2ggPSB1cmxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG5cbiAgICAgICAgdGFiIChlbGVtZW50LCBpZClcbiAgICAgICAge1xuICAgICAgICAgICAgJCgnLnRhYnNfX2xpc3RfX2xpbmsnKS5yZW1vdmVDbGFzcygndGFic19fbGlzdF9fbGlua19jdXJyZW50Jyk7XG4gICAgICAgICAgICAkKCcuY2F0YWxvZy10YWJzX19pdGVtJykucmVtb3ZlQ2xhc3MoJ2N1cnJlbnQnKTtcblxuICAgICAgICAgICAgJChlbGVtZW50KS5hZGRDbGFzcygndGFic19fbGlzdF9fbGlua19jdXJyZW50Jyk7XG4gICAgICAgICAgICAkKFwiI3RhYi1cIitpZCkuYWRkQ2xhc3MoJ2N1cnJlbnQnKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzb3J0IChuYW1lKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBfZ2V0ID0gX2dldFVybCgpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIF9nZXQuc29ydCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBsZXQgdHlwZSA9IF9nZXQuc29ydC5zcGxpdCgnLScpWzFdO1xuICAgICAgICAgICAgICAgIHR5cGUgPSAodHlwZSA9PT0gJ2FzYycpID8gJ2Rlc2MnIDogJ2FzYyc7XG4gICAgICAgICAgICAgICAgbG9jYXRpb24uc2VhcmNoID0gX2pvaW5VcmwoX3NldFVybCgnc29ydCcsIG5hbWUgKyAnLScgKyB0eXBlKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvY2F0aW9uLnNlYXJjaCA9IF9qb2luVXJsKF9zZXRVcmwoJ3NvcnQnLCBuYW1lICsgJy1hc2MnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2VhcmNoIChuYW1lLCB2YWx1ZSwgYmluZCwgZSlcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKGJpbmQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDEzKSB7XG4gICAgICAgICAgICAgICAgICAgIF9yZWRpcmVjdFVybChfc2V0VXJsKG5hbWUsIHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfcmVkaXJlY3RVcmwoX3NldFVybChuYW1lLCB2YWx1ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHJlbG9hZCAoKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBfZ2V0ID0gX2dldFVybCgpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIF9nZXQucGFnZSAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJldiA9IChfZ2V0LnBhZ2UgLSAxKSA+PSAwID8gKF9nZXQucGFnZSAtIDEpIDogJyc7XG5cbiAgICAgICAgICAgICAgICBpZiAocHJldikge1xuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5zZWFyY2ggPSAncGFnZT0nK3ByZXY7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzZXRMaW1pdCAoc2VjdGlvbiwgZWxlbWVudClcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgbGltaXQgPSBwYXJzZUludChlbGVtZW50LnZhbHVlKTtcblxuICAgICAgICAgICAgaWYgKGxpbWl0ID4gMClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gWydtb2R1bGUnLCAncGFnZXMnLCBzZWN0aW9uXS5qb2luKCdfJyk7XG5cbiAgICAgICAgICAgICAgICAkLnJlbW92ZUNvb2tpZShuYW1lKTtcbiAgICAgICAgICAgICAgICAkLmNvb2tpZShuYW1lLCBsaW1pdCwgeyBleHBpcmVzOiAzMCwgcGF0aDogJy8nIH0pO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgICAgIH0sIDUwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvLyBmdW5jdGlvbiBzZXRNb2R1bGVTb3J0KG9iaiwgbW9kdWxlX2lkLCBmaWVsZClcbiAgICAgICAgLy8ge1xuICAgICAgICAvLyAgICAgY24gPSBcIm1vZHVsZVNvcnRcIjtcbiAgICAgICAgLy8gICAgIHZhbHVlID0gJChvYmopLnZhbCgpO1xuICAgICAgICAvLyAgICAgdmFyIGN2ID0gZ2V0Q29va2llKGNuKTtcbiAgICAgICAgLy8gICAgIGlmIChjdilcbiAgICAgICAgLy8gICAgIHtcbiAgICAgICAgLy8gICAgICAgICB2YXIgYXJyID0gbmV3IEFycmF5KCk7XG4gICAgICAgIC8vICAgICAgICAgdG1wID0gdW5zZXJpYWxpemUoY3YpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAvLyAgICAgICAgIGlmICh0bXBbbW9kdWxlX2lkXSA9PSB1bmRlZmluZWQpe1xuICAgICAgICAvLyAgICAgICAgICAgICB2YXIgYXJyID0gbmV3IEFycmF5KCk7XG4gICAgICAgIC8vICAgICAgICAgICAgIGFycltmaWVsZF0gPSB2YWx1ZTtcbiAgICAgICAgLy8gICAgICAgICAgICAgdG1wW21vZHVsZV9pZF0gPSBhcnI7XG4gICAgICAgIC8vICAgICAgICAgfVxuICAgICAgICAvLyAgICAgICAgIGVsc2V7XG4gICAgICAgIC8vICAgICAgICAgICAgIGlmICh0bXBbbW9kdWxlX2lkXVtmaWVsZF0gPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRtcFttb2R1bGVfaWRdW2ZpZWxkXSA9IHZhbHVlO1xuICAgICAgICAvLyAgICAgICAgICAgICB9XG4gICAgICAgIC8vICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB0bXBbbW9kdWxlX2lkXVtmaWVsZF0gPSB2YWx1ZTtcbiAgICAgICAgLy8gICAgICAgICAgICAgfVxuICAgICAgICAvLyAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgLy8gICAgICAgICBzZXRDb29raWUoY24sc2VyaWFsaXplKHRtcCkpO1xuICAgICAgICAvLyAgICAgfVxuICAgICAgICAvLyAgICAgZWxzZVxuICAgICAgICAvLyAgICAge1xuICAgICAgICAvLyAgICAgICAgIHZhciBhcnIgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgLy8gICAgICAgICB2YXIgdG1wID0gbmV3IEFycmF5KCk7XG4gICAgICAgIC8vICAgICAgICAgdG1wW2ZpZWxkXSA9IHZhbHVlO1xuICAgICAgICAvLyAgICAgICAgIGFyclttb2R1bGVfaWRdID0gdG1wO1xuICAgICAgICAvLyAgICAgICAgIHNldENvb2tpZShjbixzZXJpYWxpemUoYXJyKSk7XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vICAgICBsb2NhdGlvbi5ocmVmID0gbG9jYXRpb24uaHJlZjtcbiAgICAgICAgLy8gfVxuXG4gICAgICAgIHVwZGF0ZSAoZSwgbmFtZSwgaWQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gTnVtYmVyKGUudGFyZ2V0LmNoZWNrZWQpO1xuXG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHVybDogWycvJywgQURNSU5fRElSLCAnL3Nob3BwaW5nL3VwZGF0ZSddLmpvaW4oJycpLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwicG9zdFwiLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnSlNPTicsXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2UpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndXBkYXRlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY2hlY2tBbGwgKGVsZW1lbnQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrZWQgPSAkKGVsZW1lbnQpLnByb3AoJ2NoZWNrZWQnKTtcbiAgICAgICAgICAgICQoJy5jaGVjay1hbGwtc3B5JykucHJvcCgnY2hlY2tlZCcsIGNoZWNrZWQpO1xuXG4gICAgICAgICAgICBpZiAoY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICQoJyNyZW1vdmUtYnV0dG9uJykuYWRkQ2xhc3MoJ2VuYWJsZScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcjcmVtb3ZlLWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdlbmFibGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBjaGVja0l0ZW0gKGVsZW1lbnQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICgkKCcuY2hlY2stYWxsLXNweTpjaGVja2VkJykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgJCgnI3JlbW92ZS1idXR0b24nKS5hZGRDbGFzcygnZW5hYmxlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJyNyZW1vdmUtYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ2VuYWJsZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGRlbGV0ZVByb2R1Y3QgKGUsIGlkKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIGlmIChjcC5kaWFsb2coJ9CS0Ysg0LTQtdC50YHRgtCy0LjRgtC10LvRjNC90L4g0YXQvtGC0LjRgtC1INGD0LTQsNC70LjRgtGMINGC0L7QstCw0YA/JykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUl0ZW0gKGlkLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBkZWxldGVJdGVtIChpZCwgbm90aWZ5KVxuICAgICAgICB7XG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHVybDogWycvJywgQURNSU5fRElSLCAnL3Nob3BwaW5nL2RlbGV0ZSddLmpvaW4oJycpLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwicG9zdFwiLFxuICAgICAgICAgICAgICAgIGRhdGE6IHsgaWQ6IGlkIH0sXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdKU09OJyxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbigpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAkKCcjbW9kdWxlLXRhYmxlJykuZmluZCgnLm1vZHVsZS10YWJsZV9fcm93W2RhdGEtaWQ9XCInK2lkKydcIl0nKS5yZW1vdmUoKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobm90aWZ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcC5ub3RpZnkoJ9Ci0L7QstCw0YAg0YPQtNCw0LvQtdC9JywgJ2luZm8nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGRlbGV0ZUFsbCAoZSlcbiAgICAgICAge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBjb25zdCBjb3VudCA9ICQoJy5jaGVjay1hbGwtc3B5OmNoZWNrZWQnKS5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCBsaW1pdCA9ICQoJy5jaGVjay1hbGwtc3B5JykubGVuZ3RoO1xuXG4gICAgICAgICAgICBpZiAoY291bnQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNwLmRpYWxvZyhbJ9CS0Ysg0LTQtdC50YHRgtCy0LjRgtC10LvRjNC90L4g0YXQvtGC0LjRgtC1INGD0LTQsNC70LjRgtGMICcsIGRlY2xPZk51bShjb3VudCwgWyfRgtC+0LLQsNGAJywgJ9GC0L7QstCw0YDQsCcsICfRgtC+0LLQsNGA0L7QsiddKSwgJz8nXS5qb2luKCcnKSkpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAkKCcuY2hlY2stYWxsLXNweTpjaGVja2VkJykuZWFjaCgoaywgZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGVsZXRlSXRlbShwYXJzZUludCgkKGVsZW1lbnQpLnZhbCgpKSwgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGsgKyAxKSA9PSBjb3VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLm5vdGlmeShbJ9Cj0LTQsNC70LXQvdC+ICcsIGRlY2xPZk51bShjb3VudCwgWyfRgtC+0LLQsNGAJywgJ9GC0L7QstCw0YDQsCcsICfRgtC+0LLQsNGA0L7QsiddKV0uam9pbignJyksICdpbmZvJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ID09IGxpbWl0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTUwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufShqUXVlcnkpKTsiXX0=

"use strict";

var order = function ($) {
    return {};
}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yZGVyLmpzIl0sIm5hbWVzIjpbIm9yZGVyIiwiJCIsImpRdWVyeSJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNQSxRQUFTLFVBQVNDLENBQVQsRUFBWTtBQUN2QixXQUFPLEVBQVA7QUFDSCxDQUZjLENBRWJDLE1BRmEsQ0FBZiIsImZpbGUiOiJvcmRlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG9yZGVyID0gKGZ1bmN0aW9uKCQpIHtcbiAgICByZXR1cm4ge31cbn0oalF1ZXJ5KSk7Il19
