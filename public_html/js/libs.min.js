"use strict";function declOfNum(e,t){var o=[2,0,1,1,1,2];return e=Math.abs(e),t[e%100>4&&e%100<20?2:o[e%10<5?e%10:5]]}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t,o,i,n,s={wrapper:"body",popupClass:".popup",triggerClass:".j-open-popup",dialogClass:".j-popup-dialog",closeClass:".j-popup-close",speed:550,overlay:{enable:!0,element:"#overlay"},overlayClickClose:!0,cssPosition:!0,bodyclass:!0,hashCheck:!0,hashChange:!0,keyHooks:!0,template:{error:"tmpl-popup-error",message:"tmpl-popup-message",notification:"tmpl-notification"}},l=null,a=null,p=null,r=[],u="",c=e("body"),h=e(window),d=e(document);e.overlay={close:function(){e(s.overlay.element).removeClass("animate"),setTimeout(function(){e(s.overlay.element).removeClass("visible is-open"),e(s.overlay.element).filter(".temp").remove()},s.speed)}},e.popup={_getPopup:function(t){var o;return"object"==(void 0===t?"undefined":_typeof(t))?t:(o=e("#"+t),o.length?o:null)},_getPosition:function(e){if(l=this,!s.cssPosition)return{};h.width();var t=h.height(),o=d.width(),i=(d.height(),e.outerWidth()),n=e.outerHeight(),a=h.scrollTop(),p=0,r=0,u={},c=e.attr("data-position");return o>=i&&(p=Math.round((o-i)/2)),t>=n?(u.position="fixed",r="50%",u.marginTop="-"+Math.ceil(n/2)+"px"):(u.position="absolute",r=a+Math.round((t-n)/2)),u.top=r,"right"==c?u.right=0:u.left=p,u},_changePosition:function(e){var t=this._getPopup(e);s.cssPosition||t.css(this._getPosition(t))},_checkScroll:function(t){(u=e(t).find(s.dialogClass)).outerHeight()>h.height()?u.addClass("is-scrolling"):u.removeClass("is-scrolling")},close:function(t,o){l=this;var i,n=0,a=!1,p=!0;return i=c.find(".popup.is-open"),void 0!==t&&(i=e(t),p=!1),void 0!==o&&(a=!0),c.trigger("popup.before_close",i),s.overlay.enable&&p&&e.overlay.close(),e(s.wrapper).off("click.wrapClose"),i.removeClass("animate"),setTimeout(function(){i.removeClass("visible is-open"),i.filter(".temp").remove(),c.trigger("popup.after_close",i),a&&setTimeout(function(){window.location.hash="",o.apply()},10)},s.speed),!a&&p&&(c.removeClass("popup-open"),s.hashChange&&(n=h.scrollTop(),window.location.hash="",h.scrollTop(n))),c.trigger("popup.close",i),this},initWrapClose:function(){l=this,e(s.wrapper).on("click.wrapClose",function(t){e(t.target).closest(s.popupClass).length||e(t.target).hasClass(s.triggerClass.substr(1))||e(t.target).closest(s.triggerClass).length||l.close()})},hooks:function(){return l=this,c.on("click",s.closeClass,function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,l.close()}),s.keyHooks&&c.on("keypress keydown",function(e){27==e.keyCode&&l.close()}),s.overlay.enable&&s.overlayClickClose&&e(s.overlay.element).on("click",function(){l.close()}),h.on("resize.popup",function(){clearTimeout(n),n=setTimeout(function(){c.find(".popup.is-open").each(function(){s.cssPosition||l._changePosition(e(this)),l._checkScroll(e(this))})},100)}),this},show:function(t,o,i){n=null;if(l=this,void 0!==t&&""!==t){var n,a=a||{};i&&c.addClass("popup-open"),"object"==(void 0===t?"undefined":_typeof(t))?n=e(t):e("#"+t).hasClass("popup")?n=e("#"+t):(e("#"+t).length&&"SCRIPT"==e("#"+t).get(0).tagName||"TEMPLATE"==e("#"+t).get(0).tagName)&&((n=e(template(t,a))).addClass("temp"),c.append(n)),n&&(n.addClass("visible is-open"),s.cssPosition||n.css(l._getPosition(n)),o?(e(s.overlay.element).addClass("visible"),setTimeout(function(){e(s.overlay.element).addClass("animate")},10)):this.initWrapClose(),l._checkScroll(n),setTimeout(function(){n.addClass("animate"),c.trigger("popup.after_open",n),setTimeout(function(){n.scrollTop(0)},10),r.length&&c.trigger("popup.init_nested",{popup:n,nested:r})},10),c.trigger("popup.open",n))}return this},clicks:function(t){return l=this,c.on("click",t,function(t){var o,i=s.overlay.enable,n=s.bodyclass;if(e(".popup.is-open").length&&c.trigger("popup.before_open",e(".popup.is-open")),s.hashChange||(t.preventDefault?t.preventDefault():t.returnValue=!1),void 0!==e(this).data("bodyclass")&&(n=e(this).data("bodyclass")),void 0!==e(this).data("overlay")&&(i=e(this).data("overlay")),e(this).data("popup")?o=e(this).data("popup"):e(this).attr("href")&&(o=e(this).attr("href")),l.open(o,i,n),void 0!==e(this).data("hashchange"))return e(this).data("hashchange")}),this},open:function(o,n,a){return l=this,void 0!==o&&o.length>1&&"#"!==o.substr(0,1)&&(o="#"+o),p=null,t=null,r=[],void 0===o&&s.hashChange&&window.location.hash.length>1?p=window.location.hash:void 0!==o&&"#"==o.substr(0,1)&&(p=o),null!==p&&p.indexOf("/")>=0&&(r=p.split("/")),i=!1,o=p,r.length&&(i=!0,o=r[0],r=r.slice(1)),void 0!==o&&null!==o&&("#"==o.substr(0,1)&&(o=o.substr(1)),e(".popup.is-open").length&&(t=e(".popup.is-open").attr("id"),i&&!r.length||o!==t?l.close(e(".popup.is-open")):e.app.tabs.hashUrl.check(l,r)),e("#tpl-"+o).length&&(o="tpl-"+o),e("#tmpl-"+o).length&&(o="tmpl-"+o),void 0===n&&(n=s.overlay.enable),void 0===a&&(a=s.bodyclass),(e("#"+o).hasClass("popup")||e("#"+o).length&&"SCRIPT"==e("#"+o).get(0).tagName||e("#"+o).length&&"TEMPLATE"==e("#"+o).get(0).tagName)&&l.show(o,n,a)),this},notification:function(t,i){l=this,clearTimeout(o),c.find("#alert-popup-notification").length||((a=e(template(s.template.notification,{title:t,text:i}))).addClass("temp"),a.attr("id","alert-popup-notification"),c.append(a),l.show(a,!1,!1)),o=setTimeout(function(){a.removeClass("animate"),setTimeout(function(){a.remove()},300)},5e3)},message:function(t,o,i){l=this;var n=e(template(s.template.message,{title:t,text:o,btn:i||null}));n.addClass("temp"),c.append(n),n.css(this._getPosition(n)),l.close(c.find(".popup.is-open"),function(){l.show(n)})},error:function(t,o){l=this;var i=e(template(s.template.error,{title:t,text:o}));i.addClass("temp"),c.append(i),i.css(this._getPosition(i)),l.close(c.find(".popup.is-open"),function(){l.show(i)})},init:function(e,t){if(s.triggerClass=e,void 0!==t)for(var o in t)void 0!==s[o]&&(s[o]=t[o]);this.open(),this.clicks(e),this.hooks()}}}(jQuery),function(e,t){e.addEventListener("DOMContentLoaded",function(){var o=t.location.href.replace(t.location.hash,"");[].slice.call(e.querySelectorAll("use[*|href]")).filter(function(e){return 0===e.getAttribute("xlink:href").indexOf("#")}).forEach(function(e){e.setAttribute("xlink:href",o+e.getAttribute("xlink:href"))})},!1)}(document,window),function(e){function t(t,o){if(null!==e.getElementById(t)){var i=e.getElementById(t).innerHTML;return Template7.compile(i)(o||{})}return""}window.template=t}(document);