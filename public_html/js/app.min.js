'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var app = app || {};

(function (body) {
    'use strict';

    app = {
        _extend: function _extend(source, config) {
            if (typeof config !== 'undefined') {
                for (var x in config) {
                    source[x] = config[x];
                }
            }

            return source;
        },
        bind: function bind() {
            for (var _ in this) {
                if (_typeof(this[_]) == 'object' && typeof this[_].init !== 'undefined') {
                    if (typeof this[_].init == 'function') {
                        this[_].init();
                    }
                }
            }
        },
        init: function init() {
            this.bind();
        }
    };
})(document.body);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9fYXBwLmluaXQuanMiXSwibmFtZXMiOlsiYXBwIiwiX2V4dGVuZCIsInNvdXJjZSIsImNvbmZpZyIsIngiLCJiaW5kIiwiXyIsImluaXQiLCJkb2N1bWVudCIsImJvZHkiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxJQUFJQSxNQUFNQSxPQUFPLEVBQWpCOztBQUVBLENBQUUsZ0JBQVE7QUFDTjs7QUFFQUEsVUFBTTtBQUVGQyxlQUZFLG1CQUVNQyxNQUZOLEVBRWNDLE1BRmQsRUFFc0I7QUFDcEIsZ0JBQUksT0FBT0EsTUFBUCxLQUFrQixXQUF0QixFQUNBO0FBQ0kscUJBQUssSUFBTUMsQ0FBWCxJQUFnQkQsTUFBaEIsRUFDQTtBQUNJRCwyQkFBT0UsQ0FBUCxJQUFZRCxPQUFPQyxDQUFQLENBQVo7QUFDSDtBQUNKOztBQUVELG1CQUFPRixNQUFQO0FBQ0gsU0FaQztBQWNGRyxZQWRFLGtCQWNLO0FBQ0gsaUJBQUksSUFBTUMsQ0FBVixJQUFlLElBQWYsRUFDQTtBQUNJLG9CQUFJLFFBQVEsS0FBS0EsQ0FBTCxDQUFSLEtBQW9CLFFBQXBCLElBQWdDLE9BQVEsS0FBS0EsQ0FBTCxFQUFRQyxJQUFoQixLQUEwQixXQUE5RCxFQUNBO0FBQ0ksd0JBQUksT0FBUSxLQUFLRCxDQUFMLEVBQVFDLElBQWhCLElBQXlCLFVBQTdCLEVBQ0E7QUFDSSw2QkFBS0QsQ0FBTCxFQUFRQyxJQUFSO0FBQ0g7QUFDSjtBQUNKO0FBQ0osU0F6QkM7QUEyQkZBLFlBM0JFLGtCQTJCSztBQUNILGlCQUFLRixJQUFMO0FBQ0g7QUE3QkMsS0FBTjtBQWdDSCxDQW5DRCxFQW1DSUcsU0FBU0MsSUFuQ2IiLCJmaWxlIjoiX19hcHAuaW5pdC5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCBhcHAgPSBhcHAgfHwge307XG5cbigoYm9keSA9PiB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYXBwID0ge1xuXG4gICAgICAgIF9leHRlbmQoc291cmNlLCBjb25maWcpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnICE9PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHggaW4gY29uZmlnKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlW3hdID0gY29uZmlnW3hdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZTtcbiAgICAgICAgfSxcblxuICAgICAgICBiaW5kKCkge1xuICAgICAgICAgICAgZm9yKGNvbnN0IF8gaW4gdGhpcylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mICh0aGlzW19dKSA9PSAnb2JqZWN0JyAmJiB0eXBlb2YgKHRoaXNbX10uaW5pdCkgIT09ICd1bmRlZmluZWQnKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAodGhpc1tfXS5pbml0KSA9PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzW19dLmluaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBpbml0KCkge1xuICAgICAgICAgICAgdGhpcy5iaW5kKCk7XG4gICAgICAgIH1cblxuICAgIH07XG59KSkoZG9jdW1lbnQuYm9keSk7Il19

'use strict';

var app = app || {};

(function (body) {
    'use strict';

    app.timeline = {

        data: {},
        filter: null,
        years: null,
        months: null,

        _initCarousel: function _initCarousel() {
            var width = $(window).width(),
                slides = $('#timeline-carousel').find('.slick-slide').length;

            if (width > 768 && slides >= 4 || width > 568 && slides >= 3 || width > 375 && slides >= 2 || width < 375 && slides >= 1) {

                $('#timeline-carousel').slick({
                    lazyLoad: 'ondemand',
                    dots: false,
                    infinite: true,
                    draggable: true,
                    speed: 259,
                    slidesToShow: 4,
                    slidesToScroll: 1,
                    prevArrow: '<button type="button" class="carousel__navigation _prev slick-prev"></button>',
                    nextArrow: '<button type="button" class="carousel__navigation _next slick-next"></button>',
                    responsive: [{
                        breakpoint: 768,
                        settings: {
                            slidesToShow: 3,
                            slidesToScroll: 3
                        }
                    }, {
                        breakpoint: 568,
                        settings: {
                            slidesToShow: 2,
                            slidesToScroll: 2
                        }
                    }, {
                        breakpoint: 375,
                        settings: {
                            fade: true,
                            slidesToShow: 1,
                            slidesToScroll: 1
                        }
                    }]
                });
            }
        },

        _currentYear: function _currentYear() {
            return parseInt(this.years.find('.is-current').data('value'));
        },

        _currentMonth: function _currentMonth() {
            return parseInt(this.months.find('.is-current').data('value'));
        },

        _handle: function _handle() {
            var _this = this;

            this.data.current = this._currentYear();
            this.data.months = [];

            this.months.find('.j-timeline-months-item').each(function (key, item) {
                var years = [],
                    strings = $(item).data('if') + '';

                if (typeof strings !== 'undefined' && strings !== '') {
                    years = strings.split(',');

                    for (var x in years) {
                        years[x] = parseInt(years[x]);
                    }
                }

                _this.data.months.push({
                    item: item,
                    year: years
                });
            });
        },

        _reinitCarousel: function _reinitCarousel() {
            var _self_ = this,
                year = this._currentYear(),
                month = this._currentMonth();

            if ($('#timeline-carousel').hasClass('slick-initialized')) {
                $('#timeline-carousel').slick('unslick');
            }

            $('#timeline-carousel').html('');

            var count = $('#timeline-cache').find('.carousel__item.is-year-' + year + '.is-month-' + month).length;

            $('#timeline-cache').find('.carousel__item.is-year-' + year + '.is-month-' + month).each(function (k, item) {
                $('#timeline-carousel').append($(this).clone());

                if (k + 1 == count) {
                    setTimeout(function () {
                        _self_._initCarousel();
                    }, 50);
                }
            });

            setTimeout(function () {
                $.app.initBlock('.j-timeline-slider');
            }, 300);
        },

        _changeFirstMonth: function _changeFirstMonth() {
            this.months.find('.j-timeline-months-item.is-active:first').trigger('click');
        },

        _match: function _match() {
            var _this2 = this;

            var _self_ = this;

            this._handle();

            this.months.find('.j-timeline-months-item').removeClass('is-active');

            $.each(this.data.months, function (k, item) {
                if (item.year.indexOf(_this2.data.current) >= 0) {
                    $(item.item).addClass('is-active');
                }
            });

            this.filter.addClass('is-active');
        },

        _events: function _events() {
            var _self_ = this;

            this.years.find('.j-timeline-years-item').on('click', function (e) {
                e.preventDefault();

                if (!$(this).hasClass('is-current')) {
                    $('#timeline-filter').find('.j-timeline-years').find('.is-current').removeClass('is-current');

                    $(this).addClass('is-current');

                    _self_._match();
                    _self_._changeFirstMonth();
                    _self_._reinitCarousel();
                }
            });

            this.months.find('.j-timeline-months-item').on('click', function (e) {
                e.preventDefault();

                if (!$(this).hasClass('is-current')) {
                    $('#timeline-filter').find('.j-timeline-months').find('.is-current').removeClass('is-current');

                    $(this).addClass('is-current');

                    _self_._match();
                    _self_._reinitCarousel();
                }
            });
        },

        bind: function bind() {
            var _self_ = this;

            this.filter = $('#timeline-filter');
            this.years = this.filter.find('.j-timeline-years');
            this.months = this.filter.find('.j-timeline-months');

            this._match();
            this._events();

            this._reinitCarousel();
        }
    };
})(document.body);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9fYXBwLnRpbWVsaW5lLmpzIl0sIm5hbWVzIjpbImFwcCIsInRpbWVsaW5lIiwiZGF0YSIsImZpbHRlciIsInllYXJzIiwibW9udGhzIiwiX2luaXRDYXJvdXNlbCIsIndpZHRoIiwiJCIsIndpbmRvdyIsInNsaWRlcyIsImZpbmQiLCJsZW5ndGgiLCJzbGljayIsImxhenlMb2FkIiwiZG90cyIsImluZmluaXRlIiwiZHJhZ2dhYmxlIiwic3BlZWQiLCJzbGlkZXNUb1Nob3ciLCJzbGlkZXNUb1Njcm9sbCIsInByZXZBcnJvdyIsIm5leHRBcnJvdyIsInJlc3BvbnNpdmUiLCJicmVha3BvaW50Iiwic2V0dGluZ3MiLCJmYWRlIiwiX2N1cnJlbnRZZWFyIiwicGFyc2VJbnQiLCJfY3VycmVudE1vbnRoIiwiX2hhbmRsZSIsImN1cnJlbnQiLCJlYWNoIiwia2V5IiwiaXRlbSIsInN0cmluZ3MiLCJzcGxpdCIsIngiLCJwdXNoIiwieWVhciIsIl9yZWluaXRDYXJvdXNlbCIsIl9zZWxmXyIsIm1vbnRoIiwiaGFzQ2xhc3MiLCJodG1sIiwiY291bnQiLCJrIiwiYXBwZW5kIiwiY2xvbmUiLCJzZXRUaW1lb3V0IiwiaW5pdEJsb2NrIiwiX2NoYW5nZUZpcnN0TW9udGgiLCJ0cmlnZ2VyIiwiX21hdGNoIiwicmVtb3ZlQ2xhc3MiLCJpbmRleE9mIiwiYWRkQ2xhc3MiLCJfZXZlbnRzIiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJiaW5kIiwiZG9jdW1lbnQiLCJib2R5Il0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUlBLE1BQU1BLE9BQU8sRUFBakI7O0FBRUEsQ0FBRSxnQkFBUTtBQUNOOztBQUVBQSxRQUFJQyxRQUFKLEdBQWU7O0FBRVhDLGNBQU0sRUFGSztBQUdYQyxnQkFBUSxJQUhHO0FBSVhDLGVBQU8sSUFKSTtBQUtYQyxnQkFBUSxJQUxHOztBQU9YQyx1QkFBZSx5QkFBVztBQUN0QixnQkFBSUMsUUFBUUMsRUFBRUMsTUFBRixFQUFVRixLQUFWLEVB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QUFGLEVBQVFnRCxRQUFSLENBQWlCLFlBQWpCOztBQUVBZiwyQkFBT1ksTUFBUDtBQUNBWiwyQkFBT0QsZUFBUDtBQUNIO0FBQ0osYUFYRDtBQVlILFNBMUtVOztBQTRLWHFCLGNBQU0sZ0JBQ047QUFDSSxnQkFBSXBCLFNBQVMsSUFBYjs7QUFFQSxpQkFBS3RDLE1BQUwsR0FBY0ssRUFBRSxrQkFBRixDQUFkO0FBQ0EsaUJBQUtKLEtBQUwsR0FBYSxLQUFLRCxNQUFMLENBQVlRLElBQVosQ0FBaUIsbUJBQWpCLENBQWI7QUFDQSxpQkFBS04sTUFBTCxHQUFjLEtBQUtGLE1BQUwsQ0FBWVEsSUFBWixDQUFpQixvQkFBakIsQ0FBZDs7QUFFQSxpQkFBSzBDLE1BQUw7QUFDQSxpQkFBS0ksT0FBTDs7QUFFQSxpQkFBS2pCLGVBQUw7QUFDSDtBQXhMVSxLQUFmO0FBMkxILENBOUxELEVBOExJc0IsU0FBU0MsSUE5TGIiLCJmaWxlIjoiX19hcHAudGltZWxpbmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgYXBwID0gYXBwIHx8IHt9O1xuXG4oKGJvZHkgPT4ge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFwcC50aW1lbGluZSA9IHtcblxuICAgICAgICBkYXRhOiB7fSxcbiAgICAgICAgZmlsdGVyOiBudWxsLFxuICAgICAgICB5ZWFyczogbnVsbCxcbiAgICAgICAgbW9udGhzOiBudWxsLFxuXG4gICAgICAgIF9pbml0Q2Fyb3VzZWw6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gJCh3aW5kb3cpLndpZHRoKCksXG4gICAgICAgICAgICAgICAgc2xpZGVzID0gJCgnI3RpbWVsaW5lLWNhcm91c2VsJykuZmluZCgnLnNsaWNrLXNsaWRlJykubGVuZ3RoO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgKHdpZHRoID4gNzY4ICYmIHNsaWRlcyA+PSA0KSB8fFxuICAgICAgICAgICAgICAgICh3aWR0aCA+IDU2OCAmJiBzbGlkZXMgPj0gMykgfHxcbiAgICAgICAgICAgICAgICAod2lkdGggPiAzNzUgJiYgc2xpZGVzID49IDIpIHx8XG4gICAgICAgICAgICAgICAgKHdpZHRoIDwgMzc1ICYmIHNsaWRlcyA+PSAxKVxuICAgICAgICAgICAgKSB7XG5cbiAgICAgICAgICAgICAgICAkKCcjdGltZWxpbmUtY2Fyb3VzZWwnKS5zbGljayh7XG4gICAgICAgICAgICAgICAgICAgIGxhenlMb2FkOiAnb25kZW1hbmQnLFxuICAgICAgICAgICAgICAgICAgICBkb3RzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgaW5maW5pdGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IDI1OSxcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiA0LFxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMSxcbiAgICAgICAgICAgICAgICAgICAgcHJldkFycm93OiAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjYXJvdXNlbF9fbmF2aWdhdGlvbiBfcHJldiBzbGljay1wcmV2XCI+PC9idXR0b24+JyxcbiAgICAgICAgICAgICAgICAgICAgbmV4dEFycm93OiAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjYXJvdXNlbF9fbmF2aWdhdGlvbiBfbmV4dCBzbGljay1uZXh0XCI+PC9idXR0b24+JyxcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2l2ZTogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDc2OCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtwb2ludDogNTY4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDM3NSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWRlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgX2N1cnJlbnRZZWFyOiBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUludCh0aGlzLnllYXJzLmZpbmQoJy5pcy1jdXJyZW50JykuZGF0YSgndmFsdWUnKSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgX2N1cnJlbnRNb250aDogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5tb250aHMuZmluZCgnLmlzLWN1cnJlbnQnKS5kYXRhKCd2YWx1ZScpKTtcbiAgICAgICAgfSxcblxuICAgICAgICBfaGFuZGxlOiBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YS5jdXJyZW50ID0gdGhpcy5fY3VycmVudFllYXIoKTtcbiAgICAgICAgICAgIHRoaXMuZGF0YS5tb250aHMgPSBbXTtcblxuICAgICAgICAgICAgdGhpcy5tb250aHMuZmluZCgnLmotdGltZWxpbmUtbW9udGhzLWl0ZW0nKS5lYWNoKChrZXksIGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgeWVhcnMgPSBbXSwgc3RyaW5ncyA9ICQoaXRlbSkuZGF0YSgnaWYnKSArICcnO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzdHJpbmdzICE9PSAndW5kZWZpbmVkJyAmJiBzdHJpbmdzICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICB5ZWFycyA9IHN0cmluZ3Muc3BsaXQoJywnKTtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4IGluIHllYXJzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB5ZWFyc1t4XSA9IHBhcnNlSW50KHllYXJzW3hdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5tb250aHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW06IGl0ZW0sXG4gICAgICAgICAgICAgICAgICAgIHllYXI6IHllYXJzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBfcmVpbml0Q2Fyb3VzZWw6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIF9zZWxmXyA9IHRoaXMsXG4gICAgICAgICAgICAgICAgeWVhciA9IHRoaXMuX2N1cnJlbnRZZWFyKCksXG4gICAgICAgICAgICAgICAgbW9udGggPSB0aGlzLl9jdXJyZW50TW9udGgoKTtcblxuICAgICAgICAgICAgaWYgKCQoJyN0aW1lbGluZS1jYXJvdXNlbCcpLmhhc0NsYXNzKCdzbGljay1pbml0aWFsaXplZCcpKSB7XG4gICAgICAgICAgICAgICAgJCgnI3RpbWVsaW5lLWNhcm91c2VsJykuc2xpY2soJ3Vuc2xpY2snKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJCgnI3RpbWVsaW5lLWNhcm91c2VsJykuaHRtbCgnJyk7XG5cbiAgICAgICAgICAgIHZhciBjb3VudCA9ICQoJyN0aW1lbGluZS1jYWNoZScpLmZpbmQoJy5jYXJvdXNlbF9faXRlbS5pcy15ZWFyLScrIHllYXIgKycuaXMtbW9udGgtJyttb250aCkubGVuZ3RoO1xuXG4gICAgICAgICAgICAkKCcjdGltZWxpbmUtY2FjaGUnKS5maW5kKCcuY2Fyb3VzZWxfX2l0ZW0uaXMteWVhci0nKyB5ZWFyICsnLmlzLW1vbnRoLScrbW9udGgpLmVhY2goZnVuY3Rpb24oaywgaXRlbSkge1xuICAgICAgICAgICAgICAgICQoJyN0aW1lbGluZS1jYXJvdXNlbCcpLmFwcGVuZCgkKHRoaXMpLmNsb25lKCkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKChrKzEpID09IGNvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfc2VsZl8uX2luaXRDYXJvdXNlbCgpO1xuICAgICAgICAgICAgICAgICAgICB9LCA1MCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJC5hcHAuaW5pdEJsb2NrKCcuai10aW1lbGluZS1zbGlkZXInKTtcbiAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgX2NoYW5nZUZpcnN0TW9udGg6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5tb250aHMuZmluZCgnLmotdGltZWxpbmUtbW9udGhzLWl0ZW0uaXMtYWN0aXZlOmZpcnN0JykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgfSxcblxuICAgICAgICBfbWF0Y2g6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIF9zZWxmXyA9IHRoaXM7XG5cbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZSgpO1xuXG4gICAgICAgICAgICB0aGlzLm1vbnRocy5maW5kKCcuai10aW1lbGluZS1tb250aHMtaXRlbScpLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcblxuICAgICAgICAgICAgJC5lYWNoKHRoaXMuZGF0YS5tb250aHMsIChrLCBpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0ueWVhci5pbmRleE9mKHRoaXMuZGF0YS5jdXJyZW50KSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQoaXRlbS5pdGVtKS5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuZmlsdGVyLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgfSxcblxuICAgICAgICBfZXZlbnRzOiBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBfc2VsZl8gPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLnllYXJzLmZpbmQoJy5qLXRpbWVsaW5lLXllYXJzLWl0ZW0nKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCEkKHRoaXMpLmhhc0NsYXNzKCdpcy1jdXJyZW50JykpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnI3RpbWVsaW5lLWZpbHRlcicpLmZpbmQoJy5qLXRpbWVsaW5lLXllYXJzJykuZmluZCgnLmlzLWN1cnJlbnQnKS5yZW1vdmVDbGFzcygnaXMtY3VycmVudCcpO1xuXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2lzLWN1cnJlbnQnKTtcblxuICAgICAgICAgICAgICAgICAgICBfc2VsZl8uX21hdGNoKCk7XG4gICAgICAgICAgICAgICAgICAgIF9zZWxmXy5fY2hhbmdlRmlyc3RNb250aCgpO1xuICAgICAgICAgICAgICAgICAgICBfc2VsZl8uX3JlaW5pdENhcm91c2VsKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMubW9udGhzLmZpbmQoJy5qLXRpbWVsaW5lLW1vbnRocy1pdGVtJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygnaXMtY3VycmVudCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJyN0aW1lbGluZS1maWx0ZXInKS5maW5kKCcuai10aW1lbGluZS1tb250aHMnKS5maW5kKCcuaXMtY3VycmVudCcpLnJlbW92ZUNsYXNzKCdpcy1jdXJyZW50Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnaXMtY3VycmVudCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIF9zZWxmXy5fbWF0Y2goKTtcbiAgICAgICAgICAgICAgICAgICAgX3NlbGZfLl9yZWluaXRDYXJvdXNlbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGJpbmQ6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIF9zZWxmXyA9IHRoaXM7XG5cbiAgICAgICAgICAgIHRoaXMuZmlsdGVyID0gJCgnI3RpbWVsaW5lLWZpbHRlcicpO1xuICAgICAgICAgICAgdGhpcy55ZWFycyA9IHRoaXMuZmlsdGVyLmZpbmQoJy5qLXRpbWVsaW5lLXllYXJzJyk7XG4gICAgICAgICAgICB0aGlzLm1vbnRocyA9IHRoaXMuZmlsdGVyLmZpbmQoJy5qLXRpbWVsaW5lLW1vbnRocycpO1xuXG4gICAgICAgICAgICB0aGlzLl9tYXRjaCgpO1xuICAgICAgICAgICAgdGhpcy5fZXZlbnRzKCk7XG5cbiAgICAgICAgICAgIHRoaXMuX3JlaW5pdENhcm91c2VsKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG59KSkoZG9jdW1lbnQuYm9keSk7Il19

'use strict';

(function (d) {
    d.addEventListener('DOMContentLoaded', function () {
        app.init();
    });
})(document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluaXQuanMiXSwibmFtZXMiOlsiZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJhcHAiLCJpbml0IiwiZG9jdW1lbnQiXSwibWFwcGluZ3MiOiI7O0FBQUEsQ0FBRSxhQUFLO0FBQ0hBLE1BQUVDLGdCQUFGLENBQW1CLGtCQUFuQixFQUF1QyxZQUFNO0FBQ3pDQyxZQUFJQyxJQUFKO0FBQ0gsS0FGRDtBQUdILENBSkQsRUFJSUMsUUFKSiIsImZpbGUiOiJpbml0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKChkID0+IHtcbiAgICBkLmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gICAgICAgIGFwcC5pbml0KCk7XG4gICAgfSk7XG59KSkoZG9jdW1lbnQpOyJdfQ==

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9fYXBwLmluaXQuanMiLCJfX2FwcC50aW1lbGluZS5qcyIsImluaXQuanMiXSwibmFtZXMiOlsiYXBwIiwiX2V4dGVuZCIsInNvdXJjZSIsImNvbmZpZyIsIngiLCJiaW5kIiwiXyIsImluaXQiLCJkb2N1bWVudCIsImJvZHkiLCJ0aW1lbGluZSIsImRhdGEiLCJmaWx0ZXIiLCJ5ZWFycyIsIm1vbnRocyIsIl9pbml0Q2Fyb3VzZWwiLCJ3aWR0aCIsIiQiLCJ3aW5kb3ciLCJzbGlkZXMiLCJmaW5kIiwibGVuZ3RoIiwic2xpY2siLCJsYXp5TG9hZCIsImRvdHMiLCJpbmZpbml0ZSIsImRyYWdnYWJsZSIsInNwZWVkIiwic2xpZGVzVG9TaG93Iiwic2xpZGVzVG9TY3JvbGwiLCJwcmV2QXJyb3ciLCJuZXh0QXJyb3ciLCJyZXNwb25zaXZlIiwiYnJlYWtwb2ludCIsInNldHRpbmdzIiwiZmFkZSIsIl9jdXJyZW50WWVhciIsInBhcnNlSW50IiwiX2N1cnJlbnRNb250aCIsIl9oYW5kbGUiLCJjdXJyZW50IiwiZWFjaCIsImtleSIsIml0ZW0iLCJzdHJpbmdzIiwic3BsaXQiLCJwdXNoIiwieWVhciIsIl9yZWluaXRDYXJvdXNlbCIsIl9zZWxmXyIsIm1vbnRoIiwiaGFzQ2xhc3MiLCJodG1sIiwiY291bnQiLCJrIiwiYXBwZW5kIiwiY2xvbmUiLCJzZXRUaW1lb3V0IiwiaW5pdEJsb2NrIiwiX2NoYW5nZUZpcnN0TW9udGgiLCJ0cmlnZ2VyIiwiX21hdGNoIiwicmVtb3ZlQ2xhc3MiLCJpbmRleE9mIiwiYWRkQ2xhc3MiLCJfZXZlbnRzIiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJkIiwiYWRkRXZlbnRMaXN0ZW5lciJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLElBQUlBLE1BQU1BLE9BQU8sRUFBakI7O0FBRUEsQ0FBRSxnQkFBUTtBQUNOOztBQUVBQSxVQUFNO0FBRUZDLGVBRkUsbUJBRU1DLE1BRk4sRUFFY0MsTUFGZCxFQUVzQjtBQUNwQixnQkFB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QUFMLENBQVlRLElBQVosQ0FBaUIsbUJBQWpCLENBQWI7QUFDQSxpQkFBS04sTUFBTCxHQUFjLEtBQUtGLE1BQUwsQ0FBWVEsSUFBWixDQUFpQixvQkFBakIsQ0FBZDs7QUFFQSxpQkFBS3lDLE1BQUw7QUFDQSxpQkFBS0ksT0FBTDs7QUFFQSxpQkFBS2pCLGVBQUw7QUFDSDtBQXhMVSxLQUFmO0FBMkxILENBOUxELEVBOExJeEMsU0FBU0MsSUE5TGI7Ozs7O0FDRkEsQ0FBRSxhQUFLO0FBQ0g0RCxNQUFFQyxnQkFBRixDQUFtQixrQkFBbkIsRUFBdUMsWUFBTTtBQUN6Q3RFLFlBQUlPLElBQUo7QUFDSCxLQUZEO0FBR0gsQ0FKRCxFQUlJQyxRQUpKIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgYXBwID0gYXBwIHx8IHt9O1xuXG4oKGJvZHkgPT4ge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFwcCA9IHtcblxuICAgICAgICBfZXh0ZW5kKHNvdXJjZSwgY29uZmlnKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB4IGluIGNvbmZpZylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZVt4XSA9IGNvbmZpZ1t4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYmluZCgpIHtcbiAgICAgICAgICAgIGZvcihjb25zdCBfIGluIHRoaXMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAodGhpc1tfXSkgPT0gJ29iamVjdCcgJiYgdHlwZW9mICh0aGlzW19dLmluaXQpICE9PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKHRoaXNbX10uaW5pdCkgPT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1tfXS5pbml0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5pdCgpIHtcbiAgICAgICAgICAgIHRoaXMuYmluZCgpO1xuICAgICAgICB9XG5cbiAgICB9O1xufSkpKGRvY3VtZW50LmJvZHkpOyIsImxldCBhcHAgPSBhcHAgfHwge307XG5cbigoYm9keSA9PiB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYXBwLnRpbWVsaW5lID0ge1xuXG4gICAgICAgIGRhdGE6IHt9LFxuICAgICAgICBmaWx0ZXI6IG51bGwsXG4gICAgICAgIHllYXJzOiBudWxsLFxuICAgICAgICBtb250aHM6IG51bGwsXG5cbiAgICAgICAgX2luaXRDYXJvdXNlbDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSAkKHdpbmRvdykud2lkdGgoKSxcbiAgICAgICAgICAgICAgICBzbGlkZXMgPSAkKCcjdGltZWxpbmUtY2Fyb3VzZWwnKS5maW5kKCcuc2xpY2stc2xpZGUnKS5sZW5ndGg7XG5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAod2lkdGggPiA3NjggJiYgc2xpZGVzID49IDQpIHx8XG4gICAgICAgICAgICAgICAgKHdpZHRoID4gNTY4ICYmIHNsaWRlcyA+PSAzKSB8fFxuICAgICAgICAgICAgICAgICh3aWR0aCA+IDM3NSAmJiBzbGlkZXMgPj0gMikgfHxcbiAgICAgICAgICAgICAgICAod2lkdGggPCAzNzUgJiYgc2xpZGVzID49IDEpXG4gICAgICAgICAgICApIHtcblxuICAgICAgICAgICAgICAgICQoJyN0aW1lbGluZS1jYXJvdXNlbCcpLnNsaWNrKHtcbiAgICAgICAgICAgICAgICAgICAgbGF6eUxvYWQ6ICdvbmRlbWFuZCcsXG4gICAgICAgICAgICAgICAgICAgIGRvdHM6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpbmZpbml0ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzcGVlZDogMjU5LFxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDQsXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxuICAgICAgICAgICAgICAgICAgICBwcmV2QXJyb3c6ICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNhcm91c2VsX19uYXZpZ2F0aW9uIF9wcmV2IHNsaWNrLXByZXZcIj48L2J1dHRvbj4nLFxuICAgICAgICAgICAgICAgICAgICBuZXh0QXJyb3c6ICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNhcm91c2VsX19uYXZpZ2F0aW9uIF9uZXh0IHNsaWNrLW5leHRcIj48L2J1dHRvbj4nLFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zaXZlOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtwb2ludDogNzY4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50OiA1NjgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtwb2ludDogMzc1LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhZGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBfY3VycmVudFllYXI6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHRoaXMueWVhcnMuZmluZCgnLmlzLWN1cnJlbnQnKS5kYXRhKCd2YWx1ZScpKTtcbiAgICAgICAgfSxcblxuICAgICAgICBfY3VycmVudE1vbnRoOiBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUludCh0aGlzLm1vbnRocy5maW5kKCcuaXMtY3VycmVudCcpLmRhdGEoJ3ZhbHVlJykpO1xuICAgICAgICB9LFxuXG4gICAgICAgIF9oYW5kbGU6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5kYXRhLmN1cnJlbnQgPSB0aGlzLl9jdXJyZW50WWVhcigpO1xuICAgICAgICAgICAgdGhpcy5kYXRhLm1vbnRocyA9IFtdO1xuXG4gICAgICAgICAgICB0aGlzLm1vbnRocy5maW5kKCcuai10aW1lbGluZS1tb250aHMtaXRlbScpLmVhY2goKGtleSwgaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciB5ZWFycyA9IFtdLCBzdHJpbmdzID0gJChpdGVtKS5kYXRhKCdpZicpICsgJyc7XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHN0cmluZ3MgIT09ICd1bmRlZmluZWQnICYmIHN0cmluZ3MgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHllYXJzID0gc3RyaW5ncy5zcGxpdCgnLCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHggaW4geWVhcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHllYXJzW3hdID0gcGFyc2VJbnQoeWVhcnNbeF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhLm1vbnRocy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbTogaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgeWVhcjogeWVhcnNcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIF9yZWluaXRDYXJvdXNlbDogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgX3NlbGZfID0gdGhpcyxcbiAgICAgICAgICAgICAgICB5ZWFyID0gdGhpcy5fY3VycmVudFllYXIoKSxcbiAgICAgICAgICAgICAgICBtb250aCA9IHRoaXMuX2N1cnJlbnRNb250aCgpO1xuXG4gICAgICAgICAgICBpZiAoJCgnI3RpbWVsaW5lLWNhcm91c2VsJykuaGFzQ2xhc3MoJ3NsaWNrLWluaXRpYWxpemVkJykpIHtcbiAgICAgICAgICAgICAgICAkKCcjdGltZWxpbmUtY2Fyb3VzZWwnKS5zbGljaygndW5zbGljaycpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkKCcjdGltZWxpbmUtY2Fyb3VzZWwnKS5odG1sKCcnKTtcblxuICAgICAgICAgICAgdmFyIGNvdW50ID0gJCgnI3RpbWVsaW5lLWNhY2hlJykuZmluZCgnLmNhcm91c2VsX19pdGVtLmlzLXllYXItJysgeWVhciArJy5pcy1tb250aC0nK21vbnRoKS5sZW5ndGg7XG5cbiAgICAgICAgICAgICQoJyN0aW1lbGluZS1jYWNoZScpLmZpbmQoJy5jYXJvdXNlbF9faXRlbS5pcy15ZWFyLScrIHllYXIgKycuaXMtbW9udGgtJyttb250aCkuZWFjaChmdW5jdGlvbihrLCBpdGVtKSB7XG4gICAgICAgICAgICAgICAgJCgnI3RpbWVsaW5lLWNhcm91c2VsJykuYXBwZW5kKCQodGhpcykuY2xvbmUoKSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoKGsrMSkgPT0gY291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zZWxmXy5faW5pdENhcm91c2VsKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDUwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkLmFwcC5pbml0QmxvY2soJy5qLXRpbWVsaW5lLXNsaWRlcicpO1xuICAgICAgICAgICAgfSwgMzAwKTtcbiAgICAgICAgfSxcblxuICAgICAgICBfY2hhbmdlRmlyc3RNb250aDogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLm1vbnRocy5maW5kKCcuai10aW1lbGluZS1tb250aHMtaXRlbS5pcy1hY3RpdmU6Zmlyc3QnKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICB9LFxuXG4gICAgICAgIF9tYXRjaDogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgX3NlbGZfID0gdGhpcztcblxuICAgICAgICAgICAgdGhpcy5faGFuZGxlKCk7XG5cbiAgICAgICAgICAgIHRoaXMubW9udGhzLmZpbmQoJy5qLXRpbWVsaW5lLW1vbnRocy1pdGVtJykucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuXG4gICAgICAgICAgICAkLmVhY2godGhpcy5kYXRhLm1vbnRocywgKGssIGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlbS55ZWFyLmluZGV4T2YodGhpcy5kYXRhLmN1cnJlbnQpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgJChpdGVtLml0ZW0pLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5maWx0ZXIuYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgICAgICB9LFxuXG4gICAgICAgIF9ldmVudHM6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIF9zZWxmXyA9IHRoaXM7XG5cbiAgICAgICAgICAgIHRoaXMueWVhcnMuZmluZCgnLmotdGltZWxpbmUteWVhcnMtaXRlbScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJ2lzLWN1cnJlbnQnKSkge1xuICAgICAgICAgICAgICAgICAgICAkKCcjdGltZWxpbmUtZmlsdGVyJykuZmluZCgnLmotdGltZWxpbmUteWVhcnMnKS5maW5kKCcuaXMtY3VycmVudCcpLnJlbW92ZUNsYXNzKCdpcy1jdXJyZW50Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnaXMtY3VycmVudCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIF9zZWxmXy5fbWF0Y2goKTtcbiAgICAgICAgICAgICAgICAgICAgX3NlbGZfLl9jaGFuZ2VGaXJzdE1vbnRoKCk7XG4gICAgICAgICAgICAgICAgICAgIF9zZWxmXy5fcmVpbml0Q2Fyb3VzZWwoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5tb250aHMuZmluZCgnLmotdGltZWxpbmUtbW9udGhzLWl0ZW0nKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCEkKHRoaXMpLmhhc0NsYXNzKCdpcy1jdXJyZW50JykpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnI3RpbWVsaW5lLWZpbHRlcicpLmZpbmQoJy5qLXRpbWVsaW5lLW1vbnRocycpLmZpbmQoJy5pcy1jdXJyZW50JykucmVtb3ZlQ2xhc3MoJ2lzLWN1cnJlbnQnKTtcblxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdpcy1jdXJyZW50Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgX3NlbGZfLl9tYXRjaCgpO1xuICAgICAgICAgICAgICAgICAgICBfc2VsZl8uX3JlaW5pdENhcm91c2VsKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYmluZDogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgX3NlbGZfID0gdGhpcztcblxuICAgICAgICAgICAgdGhpcy5maWx0ZXIgPSAkKCcjdGltZWxpbmUtZmlsdGVyJyk7XG4gICAgICAgICAgICB0aGlzLnllYXJzID0gdGhpcy5maWx0ZXIuZmluZCgnLmotdGltZWxpbmUteWVhcnMnKTtcbiAgICAgICAgICAgIHRoaXMubW9udGhzID0gdGhpcy5maWx0ZXIuZmluZCgnLmotdGltZWxpbmUtbW9udGhzJyk7XG5cbiAgICAgICAgICAgIHRoaXMuX21hdGNoKCk7XG4gICAgICAgICAgICB0aGlzLl9ldmVudHMoKTtcblxuICAgICAgICAgICAgdGhpcy5fcmVpbml0Q2Fyb3VzZWwoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbn0pKShkb2N1bWVudC5ib2R5KTsiLCIoKGQgPT4ge1xuICAgIGQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgICAgICAgYXBwLmluaXQoKTtcbiAgICB9KTtcbn0pKShkb2N1bWVudCk7Il19
