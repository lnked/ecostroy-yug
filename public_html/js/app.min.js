"use strict";function yandexMap(){ymaps.ready(function(){var t,i,e=$(window).width()<=667;(t=new ymaps.Map("location-map",{center:[44.97093,38.934538],zoom:18,controls:["zoomControl","fullscreenControl"]})).behaviors.disable("multiTouch"),t.behaviors.disable("scrollZoom"),t.controls.get("zoomControl").options.set("size","small"),t.controls.get("zoomControl").options.set("position",{right:10,top:50}),e&&t.behaviors.disable("drag"),i=new ymaps.Placemark(t.getCenter(),{},{iconLayout:"default#image",iconImageHref:"/images/ico/location-pin.svg",iconImageSize:[29,40],iconImageOffset:[-29,-40]}),t.geoObjects.add(i)})}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},app=app||{};!function(t){app={_extend:function(t,i){if(void 0!==i)for(var e in i)t[e]=i[e];return t},bind:function(){for(var t in this)"object"==_typeof(this[t])&&void 0!==this[t].init&&"function"==typeof this[t].init&&this[t].init()},init:function(){this.bind()}}}(document.body);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},app=app||{};!function(t){var i,e=$(t);app.ajaxForm={config:{form_class:".form-ajax",form_reset:"form-reset",link_class:".js-request-link",error_class:"error",error_message:"form__error-message",error_message_class:"j-error-message",error_message_addclass:"show",form_label:".form__wrapper",checkbox_label:"checkbox__label"},callback_stack:{},extend:function(t){if(i=this,void 0!==t){var e;for(e in t)void 0!==i.config[e]&&(i.config[e]=t[e])}},default_handler:function(t,e){if(i=this,e.status)e.hasOwnProperty("redirect_url")&&(window.location.href=e.redirect_url);else if(void 0!==e.errors||void 0!==e.error_message){var n;void 0!==e.errors&&(n=e.errors),void 0!==e.error_message&&e.error_message,i.validation(t,n,e.error_message)}e.hasOwnProperty("open_popup")&&($("body").find(".popup.is-open").length?$.popup.close($("body").find(".popup.is-open"),function(){$.popup.open(e.open_popup)}):$.popup.open(e.open_popup)),e.hasOwnProperty("message")&&$.popup.message(e.title,e.message)},validation:function(t,e,n){i=this,t.find("."+i.config.error_class).removeClass(i.config.error_class),t.find("."+i.config.error_message).remove(),t.find("."+i.config.error_message_class).removeClass(i.config.error_message_addclass);var o,a;setTimeout(function(){if(void 0!==n&&""!==n&&(t.find("."+i.config.error_message_class).html(n),t.find("."+i.config.error_message_class).addClass(i.config.error_message_addclass)),void 0!==e&&""!==e)for(o in e)t.find('input[name="'+o+'"]').length>0&&(a=t.find('input[name="'+o+'"]')),t.find('select[name="'+o+'"]').length>0&&(a=t.find('select[name="'+o+'"]')),t.find('textarea[name="'+o+'"]').length>0&&(a=t.find('textarea[name="'+o+'"]')),a.closest("."+i.config.checkbox_label).length>0&&(a=a.closest("."+i.config.checkbox_label)),void 0!==a&&(a.addClass(i.config.error_class),a.closest(i.config.form_label).append('<div class="'+i.config.error_message+'">'+e[o]+"</div>"))},10)},upload:function(){i=this,e.on("submit",".form-file-upload",function(t){return AIM.submit(this,{onStart:function(){},onComplete:function(t){"object"===(void 0===t?"undefined":_typeof(t))&&!0===t.status&&t.hasOwnProperty("photo_url")}})}),$(document).on("change",".upload_button_onchange",function(){$(this).closest(".upload_button").find(".upload_button_field").length>0&&$(this).closest(".upload_button").find(".upload_button_field").html($(this).val())})},send:function(t,i,e,n,o){"function"!=typeof n&&(n=function(){}),"function"!=typeof o&&(o=function(){});try{$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:t,type:i,data:e,contentType:!1,processData:"get"==i.toLowerCase(),success:n,error:o,dataType:"JSON"})}catch(t){}},initLink:function(){i=this,e.on("click",i.config.link_class,function(t){t.preventDefault?t.preventDefault():t.returnValue=!1;var e=$(this);if(!e.data("is-busy")){e.data("is-busy",!0);var n=$(this).attr("href")||$(this).data("action"),o=$(this).data("method")||"get",a={};i.send(n,o,a,function(t){e.data("callback")&&i.callback_stack.hasOwnProperty(e.data("callback"))?i.callback_stack[e.data("callback")](e,t):i.default_handler(e,t),t.status,e.data("is-busy",!1)},function(t){i.default_handler(e,t),e.data("is-busy",!1)})}})},initForm:function(){i=this,e.on("submit",i.config.form_class,function(t){t.preventDefault?t.preventDefault():t.returnValue=!1;var e=$(this),n=e.attr("action"),o=e.attr("method")||"post",a=window.FormData?new FormData(e[0]):e.serialize();if(!e.data("is-busy")){if(e.data("is-busy",!0),"undefined"!=typeof button&&(button.data("loading")&&(button.data("original",button.text()),button.text(button.data("loading"))),button.addClass("preload")),e.data("precallback")&&i.callback_stack.hasOwnProperty(e.data("precallback"))&&!i.callback_stack[e.data("precallback")](e))return!1;i.send(n,o,a,function(t){e.data("callback")&&i.callback_stack.hasOwnProperty(e.data("callback"))?i.callback_stack[e.data("callback")](e,t):i.default_handler(e,t),!0===t.status&&e.hasClass(i.config.form_reset)&&(e.find("."+i.config.error_class).removeClass(i.config.error_class),e.get(0).reset()),"undefined"!=typeof button&&(button.data("original")&&button.text(button.data("original")),button.removeClass("preload")),e.data("is-busy",!1)},function(t){i.default_handler(e,t),e.data("is-busy",!1)})}})},init:function(t){this.extend(t),this.initForm(),this.initLink()}},app.ajaxForm.init()}(document.body);var app=app||{};!function(t){function i(t,i){this.initialize.apply(this,arguments)}i.prototype={initialize:function(t,i){var e=document.getElementById(t);e&&(this.elem=e,this.tl=i,this.countDown())},countDown:function(){var t=new Date,i=Math.floor((this.tl-t)/864e5),e=Math.floor((this.tl-t)%864e5/36e5),n=Math.floor((this.tl-t)%864e5/6e4)%60,o=Math.floor((this.tl-t)%864e5/1e3)%60%60,a=this;if(!(this.tl-t>0))return!1;var s=['<div class="timer__parts__column"><div class="timer__parts__digit">',this.addZero(i),'</div><div class="timer__parts__caption">',declOfNum(i,["День","Дня","Дней"]),"</div></div>",'<div class="timer__parts__column"><div class="timer__parts__digit">',this.addZero(e),'</div><div class="timer__parts__caption">',declOfNum(e,["Час","Часа","Часов"]),"</div></div>",'<div class="timer__parts__column"><div class="timer__parts__digit">',this.addZero(n),'</div><div class="timer__parts__caption">',declOfNum(n,["Минута","Минуты","Минут"]),"</div></div>",'<div class="timer__parts__column"><div class="timer__parts__digit">',this.addZero(o),'</div><div class="timer__parts__caption">',declOfNum(o,["Секунда","Секунды","Секунд"]),"</div></div>"];this.elem&&(this.elem.innerHTML=s.join(""),setTimeout(function(){a.countDown()},1e3))},addZero:function(t){return("0"+t).slice(-2)}},app.countdown={init:function(){new i("countdown",new Date(2017,7,1,0,0,0))}}}(document.body);var app=app||{};!function(t){app.documents={init:function(){$("body").on("click",".j-load-documents",function(t){var i=$(this);"show"===i.data("motion")?(i.data("motion","hide"),$("#documents").find(".is-motion").removeClass("is-hidden")):(i.data("motion","show"),$("html, body").stop().animate({scrollTop:$("#documentation-anchor").offset().top},"fast"),setTimeout(function(){$("#documents").find(".is-motion").addClass("is-hidden")},200)),i.closest(".page-button").toggleClass("_down").toggleClass("_up")})}}}(document.body);var app=app||{};!function(t){app.gallery={init:function(){$(".zoom").fancybox()}}}(document.body);var app=app||{};!function(t){app.layzr={init:function(){$(window).lazyLoadXT({edgeY:200,srcAttr:"data-src"})}}}(document.body);var app=app||{};!function(t){app.mask={bind:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".mask-phone";new Cleave(t,{phone:!0,phoneRegionCode:"ru"})},init:function(){var t=this;t.bind(),$("body").on("popup.after_open",function(i,e){setTimeout(function(){t.bind($(e).find(".mask-phone"))},100)})}}}(document.body);var app=app||{};!function(t){app.popup={init:function(){$.popup.init(".j-open-popup",{hashChange:!1,cssPosition:!1,wrapper:".layout-wrapper"})}}}(document.body);var app=app||{};!function(t){var i;app.sandwich={config:{keyHooks:!1,selector:".js-sandwich-menu",wrapper:".layout-wrapper",overlay:".overlay"},extend:function(t){if(i=this,void 0!==t){var e;for(e in t)void 0!==i.config[e]&&(i.config[e]=t[e])}},isOpen:function(){return $("body").hasClass("page-visible")},hide:function(){$("body").removeClass("page-open"),setTimeout(function(){$("body").removeClass("page-visible")},10),$(this.config.overlay).css({visibility:"hidden"})},toggle:function(){$("body").hasClass("page-visible")?($("body").removeClass("page-open"),setTimeout(function(){$("body").removeClass("page-visible")},200)):($("body").addClass("page-open"),setTimeout(function(){$("body").addClass("page-visible")},10));var t="visible";$("body").hasClass("page-open")||(t="hidden"),$(i.config.overlay).css({visibility:t})},sandwichTrigger:function(){(i=this).config.keyHooks&&$("body").on("keydown",function(t){27==t.keyCode&&i.isOpen()&&i.toggle()}),$("body").on("click",i.config.selector,function(t){t.preventDefault?t.preventDefault():t.returnValue=!1,i.toggle()})},overlayTrigger:function(){i=this,$("body").on("click",i.config.overlay,function(t){i.hide()})},init:function(){this.extend({keyHooks:!0,selector:".js-sandwich-menu",wrapper:".layout-wrapper",overlay:"#menu-overlay"}),this.sandwichTrigger(),this.overlayTrigger()}}}(document.body);var app=app||{};!function(t){app.tabs={init:function(){var t=void 0;$("body").on("click",".j-tabs-trigger",function(i){i.preventDefault();var e=$(this);if(!e.hasClass("is-current")){var n=e.data("target");(t=$(this).closest(".j-tabs")).find(".is-current").removeClass("is-current"),t.find(".j-tabs-content").removeClass("is-active"),e.addClass("is-current"),t.find('.j-tabs-content[data-system="'+n+'"]').addClass("is-active"),e.hasClass("j-tabs-carousel")&&app.carousel.main("reload",n)}return!1})}}}(document.body);var app=app||{};!function(t){app.timeline={data:{},filter:null,years:null,months:null,_initCarousel:function(){var t=$(window).width(),i=$("#timeline-carousel").find(".slick-slide").length;(t>768&&i>=4||t>568&&i>=3||t>375&&i>=2||t<375&&i>=1)&&$("#timeline-carousel").slick({lazyLoad:"ondemand",dots:!1,infinite:!0,draggable:!0,speed:259,slidesToShow:4,slidesToScroll:1,prevArrow:'<button class="carousel__nav carousel__nav--left slick-prev"><svg class="carousel__nav__ico" role="image"><use xlink:href="#left-arrow"/></svg></button>',nextArrow:'<button class="carousel__nav carousel__nav--right slick-next"><svg class="carousel__nav__ico" role="image"><use xlink:href="#right-arrow"/></svg></button>',responsive:[{breakpoint:768,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:568,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:375,settings:{fade:!0,slidesToShow:1,slidesToScroll:1}}]})},_currentYear:function(){return parseInt(this.years.find(".is-current").data("value"))},_currentMonth:function(){return parseInt(this.months.find(".is-current").data("value"))},_handle:function(){var t=this;this.data.current=this._currentYear(),this.data.months=[],this.months.find(".j-timeline-months-item").each(function(i,e){var n=[],o=$(e).data("if")+"";if(void 0!==o&&""!==o){n=o.split(",");for(var a in n)n[a]=parseInt(n[a])}t.data.months.push({item:e,year:n})})},_reinitCarousel:function(){var t=this;this._currentYear(),this._currentMonth();$("#timeline-carousel").hasClass("slick-initialized")&&$("#timeline-carousel").slick("unslick"),t._initCarousel()},_changeFirstMonth:function(){this.months.find(".j-timeline-months-item.is-active:first").trigger("click")},_match:function(){var t=this;this._handle(),this.months.find(".j-timeline-months-item").removeClass("is-active"),$.each(this.data.months,function(i,e){e.year.indexOf(t.data.current)>=0&&$(e.item).addClass("is-active")}),this.filter.addClass("is-active")},_events:function(){var t=this;this.years.find(".j-timeline-years-item").on("click",function(i){i.preventDefault(),$(this).hasClass("is-current")||($("#timeline-filter").find(".j-timeline-years").find(".is-current").removeClass("is-current"),$(this).addClass("is-current"),t._match(),t._changeFirstMonth(),t._reinitCarousel())}),this.months.find(".j-timeline-months-item").on("click",function(i){i.preventDefault(),$(this).hasClass("is-current")||($("#timeline-filter").find(".j-timeline-months").find(".is-current").removeClass("is-current"),$(this).addClass("is-current"),t._match(),t._reinitCarousel())})},init:function(){this.filter=$("#timeline-filter"),this.years=this.filter.find(".j-timeline-years"),this.months=this.filter.find(".j-timeline-months"),this._match(),this._events(),this._reinitCarousel()}}}(document.body),function(t){var i,e,n,o,a,s,r,l,c=t("#navigation"),d=t("html, body"),u=t(window).width()<=667;l=t(".j-section").map(function(){return{offset:t(this).offset().top-0,element:t(this)}}),n=function(e){s=null,l.map(function(){(i=t(this)[0]).offset<e&&(s=i.element)}),null!==s&&s.attr("id")&&((r=c.find('.j-navigation[href="#'+s.attr("id").split("-")[0]+'-section"]')).hasClass("is-current")||(c.find(".j-navigation.is-current").removeClass("is-current"),r.addClass("is-current")))},o=function(i,n){i=i.replace("-section","").split("?")[0],(a=t(i+"-anchor")).length&&(e=a.offset().top-0,u=t(window).width()<=667,n?d.stop().animate({scrollTop:e},"medium",function(){c.removeClass("is-disabled")}):d.scrollTop(e))},t("body").on("click",".j-navigation",function(t){c.addClass("is-disabled"),o(this.hash,!0)}),setTimeout(function(){window.location.hash.length>1&&(c.addClass("is-disabled"),o(window.location.hash,!1))},50),t(window).scroll(function(){n(t(window).scrollTop())})}(jQuery),$(document).ready(function(){app.init()});